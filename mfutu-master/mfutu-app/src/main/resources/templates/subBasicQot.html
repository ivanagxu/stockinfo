<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}" />
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
	<!-- Full-page refresh every 5 seconds so Kindle only reloads the whole page -->
	<meta http-equiv="refresh" content="300">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<style>
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
			-webkit-text-size-adjust: 100%;
			-ms-text-size-adjust: 100%;
			font-size: 32px;
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
			background: #fff;
			color: #222;
		}
		/* safe area for iPhone X+ notch */
		body {
			padding-top: constant(safe-area-inset-top);
			padding-right: constant(safe-area-inset-right);
			padding-bottom: constant(safe-area-inset-bottom);
			padding-left: constant(safe-area-inset-left);
			padding-top: env(safe-area-inset-top);
			padding-right: env(safe-area-inset-right);
			padding-bottom: env(safe-area-inset-bottom);
			padding-left: env(safe-area-inset-left);
		}

		.qot-container {
			margin: 0px 0;
			overflow-x: auto;
			-webkit-overflow-scrolling: touch;
		}
		.qot-table {
			width: 100%;
			border-collapse: collapse;
			min-width: 200px;
			font-size: 1rem;
		}
		.qot-table th {
			background-color: #878b87;
			color: white;
			padding: 12px;
			text-align: left;
			font-weight: bold;
		}
		.qot-table td {
			border: 1px solid #ddd;
			padding: 10px;
		}
		.qot-table tr:nth-child(even) {
			background-color: #f2f2f2;
		}
		.qot-table tr:hover {
			background-color: #e8e8e8;
		}
		.price-up {
			color: red;
			font-weight: bold;
		}
		.price-down {
			color: green;
			font-weight: bold;
		}
		.price-neutral {
			color: black;
		}
		.refresh-info {
			font-size: 12px;
			color: #666;
			margin-top: 1px;
		}

		/* Responsive typography and spacing */
		@media (max-width: 800px) {
			html { font-size: 32px; }
			.qot-table { min-width: 200px; }
			.qot-table th, .qot-table td { padding: 8px; }
			.refresh-info { font-size: 13px; }
		}

		@media (max-width: 420px) {
			html { font-size: 32px; }
			.qot-table { min-width: 220px; }
			h1 { font-size: 1.1rem; padding: 8px 12px; }
			.qot-table th, .qot-table td { padding: 6px; }
			.refresh-info { font-size: 12px; }
		}
	</style>
</head>
<body>
	<div class="qot-container">
		<table class="qot-table" id="qotTable">
			<thead>
				<tr>
					<th>代码</th>
					<!--<th>名称</th>-->
					<th>市场</th>
					<th>当前价</th>
					<!--<th>昨收价</th>-->
					<th>涨跌幅 (%)</th>
					<th>更新时间</th>
				</tr>
			</thead>
			<tbody id="qotBody">
				<tr th:if="${qotList == null or #lists.isEmpty(qotList)}">
					<td colspan="7" style="text-align: center; padding: 20px;">No data available</td>
				</tr>
				<tr th:each="item : ${qotList}">
					<td th:text="${item.code}">N/A</td>
					<!--<td th:text="${item.name}">N/A</td>-->
					<td th:text="${item.market}">N/A</td>
					<td th:text="${item.curPrice}">0.00</td>
					<!--<td th:text="${item.lastClosePrice}">0.00</td>-->
					<td th:text="${item.increaseRate}" th:classappend=" ${item.increaseRate.startsWith('+') ? ' price-up' : (item.increaseRate.startsWith('-') ? ' price-down' : ' price-neutral')}">0.00%</td>
					<td th:text="${item.relativeTime}">N/A</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="refresh-info">
		Last updated: <span th:text="${#dates.format(lastUpdate, 'HH:mm:ss')}">--:--:--</span>，每300秒刷新页面
	</div>
	<div th:replace="~{fragments/footer :: copy}"></div>

	<!-- Page refresh is handled by meta-refresh; no client-side fetching to support Kindle local reloads. -->
</body>
</html>
